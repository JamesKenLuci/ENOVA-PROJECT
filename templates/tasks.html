{% extends "base.html" %}
{% block content %}

<h1 class="page-title">Tasks</h1>

<div style="margin-bottom: 20px;">
    <a href="{{ url_for('new_task') }}" class="add-btn">ï¼‹ Add New Task</a>
</div>

<div class="task-list">

{% if tasks %}
    {% for task in tasks %}

    <div class="task-card glass">

        <div class="task-header">
            <h2>{{ task.title }}</h2>

            <span class="priority {{ task.priority | lower }}">
                {{ task.priority }}
            </span>
        </div>

        {% if task.description %}
        <p class="task-desc">{{ task.description }}</p>
        {% endif %}

        <p class="task-meta">
            <strong>Subject:</strong> {{ task.subject }} <br>

            {% if task.due_date %}
            <strong>Due:</strong> {{ task.due_date.strftime("%b %d, %Y") }} <br>
            {% else %}
            <strong>Due:</strong> â€” <br>
            {% endif %}

            <strong>Status:</strong>
            {% if task.completed %}
                âœ… Completed
            {% else %}
                ğŸ•“ Not Completed
            {% endif %}
        </p>

        <div class="task-actions">
            <a href="{{ url_for('edit_task', task_id=task.id) }}" class="edit-btn">âœï¸ Edit</a>

            <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST">
                <button class="delete-btn" onclick="return confirm('Delete this task?')">
                    ğŸ—‘ Delete
                </button>
            </form>
        </div>

    </div>

    {% endfor %}

{% else %}
    <p>No tasks yet.</p>
{% endif %}

</div>

{% endblock %}
